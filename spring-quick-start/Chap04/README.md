# Chap04

책의 Day 2 CLASS 05 ~ Day 2 CLASS 07 파트를 다룬다.

### 어노테이션 기반 AOP
AOP를 어노테이션으로 설정하려면 스프링 설정 파일에 \<aop:aspectj-autoproxy> 엘리먼트를 선언해야 한다. 선언하기만 하면 컨테이너가 AOP 관련 어노테이션들을 알아서 인식하고 처리한다.  
AOP 관련 어노테이션들은 어드바이스 클래스에 설정해야 하고, 이를 스프링 컨테이너가 처리하게 하려면 스프링 설정 파일에 \<bean>으로 등록되거나 `@Service` 어노테이션을 사용하여 컴포넌트가 검색되어야 한다.  
어노테이션 설정으로 포인트컷을 선언할 때는 `@Pointcut`을 사용하며, 여러 포인트컷을 식별하기 위하여 **참조 메소드**를 이용한다.  
어드바이스 클래스에는 어드바이스 메소드가 있고, 이 메소드가 언제 동작할지 결정하는 어노테이션에는 `@Before`, `@AfterReturning` 등이 있다. 어드바이스 어노테이션에 포인트컷 참조 메소드를 지정하면 된다.  
AOP 설정에서 가장 중요한 애스팩트는 `@Aspect`를 이용하여 설정한다. 어드바이스 클래스 위에 애스팩트 어노테이션을 설정하면 스프링 컨테이너는 어드바이스 객체를 애스팩트 객체로 인식한다. 이 객체의 포인트컷 어노테이션과 어드바이스 어노테이션에 의해 위빙이 처리된다.  
어노테이션 기반에서는 어드바이스 클래스마다 포인트컷 설정을 해야하기 때문에, 같은 포인트컷이 반복되는 문제가 생긴다. 그래서 독립된 클래스에 포인트컷을 따로 설정할 수 있게 한다. 포인트컷이 있는 클래스 이름과 참조 메소드 이름을 조합하여 지정할 수 있다.  


### 커밋
- [56f3fdc](https://github.com/ItzTree/study-archive/commit/56f3fdc80c14a7e97ed42eb77356dd187c087cbe)  
    BeforeAdvice 클래스에 어노테이션을 적용한다.  

    ```
    [사전 처리] getUser() 메소드 ARGS 정보 : UserVO [id=test, password=test123, name=null, role=null]
    [공통 로그] 비즈니스 로직 수행 전 동작
    ===> JDBC로 getUser() 기능 처리
    관리자님 환영합니다.
    ```
